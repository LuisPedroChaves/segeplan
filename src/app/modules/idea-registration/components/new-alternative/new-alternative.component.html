<ngx-simplebar fxLayoutAlign="center start" class="my-content">
  <mat-stepper orientation="vertical" linear="true" #stepper fxFlex.lt-md="100" fxFlex.md="80" fxFlex.gt-md="65">

    <mat-step [stepControl]="preliminaryName">
      <ng-template matStepLabel>Nombre preliminar de la idea de proyecto de inversión en relación a la alternativa
        seleccionada</ng-template>

      <form [formGroup]="preliminaryName" autocomplete="off">
        <div fxLayout="column" fxLayoutGap="15px">
          <br>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Tipo de idea de proyecto</mat-label>
            <mat-select formControlName="typeProject" (selectionChange)="enableTypeProject()">
              <mat-option value="Forma Capital Fijo">
                Forma Capital Fijo
              </mat-option>
              <mat-option value="No Forma Capital Fijo">
                No Forma Capital Fijo
              </mat-option>
            </mat-select>
            <mat-error *ngIf="preliminaryName.get('typeProject')?.hasError('required')">
              El tipo de idea es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>

          <div fxLayout="row wrap">
            <p fxFlex="10" class="mat-subheading-2" fxLayoutAlign="center center">A.</p>
            <mat-form-field fxFlex appearance="outline">
              <mat-label>Proceso</mat-label>
              <mat-select formControlName="proccess">
                <mat-option value="Proceso1">
                  Proceso 1
                </mat-option>
                <mat-option value="Proceso2">
                  Proceso 2
                </mat-option>
              </mat-select>
              <!-- <mat-error *ngIf="preliminaryName.get('typeProject')?.hasError('required')">
                El tipo de idea es <strong>requerido</strong>
              </mat-error> -->
            </mat-form-field>
          </div>

          <div fxLayout="row wrap">
            <p fxFlex="10" class="mat-subheading-2" fxLayoutAlign="center center">B.</p>
            <mat-form-field fxFlex appearance="outline">
              <mat-label>Objeto</mat-label>
              <mat-select formControlName="object">
                <mat-option value="Objecto1">
                  Objeto 1
                </mat-option>
                <mat-option value="Objeto2">
                  Objeto 2
                </mat-option>
              </mat-select>
              <!-- <mat-error *ngIf="preliminaryName.get('typeProject')?.hasError('required')">
                El tipo de idea es <strong>requerido</strong>
              </mat-error> -->
            </mat-form-field>
          </div>

          <div fxLayout="row wrap">

            <p fxFlex="10" class="mat-subheading-2" fxLayoutAlign="center center">C.</p>

            <div fxFlex fxLayout="column">

              <div fxLayout="row wrap" fxLayoutGap.gt-sm="10px">
                <mat-form-field fxFlex appearance="outline">
                  <mat-label>Departamento</mat-label>
                  <mat-select formControlName="departament">
                    <mat-option value="Guatemala">
                      Guatemala
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex appearance="outline">
                  <mat-label>Municipio</mat-label>
                  <mat-select formControlName="municipality">
                    <mat-option value="Guatemala">
                      Guatemala
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <mat-form-field fxFlex appearance="outline">
                <mat-label>Aldea</mat-label>
                <mat-select formControlName="village">
                  <mat-option value="Carmen">
                    Carmen
                  </mat-option>
                </mat-select>
              </mat-form-field>

            </div>

          </div>

          <p class="mat-subheading-2">Nombre preliminar del proyecto</p>
          <p class="mat-title" fxLayoutAlign="center center">
            <span *ngIf="preliminaryName.get('proccess')?.value">
              A. {{ preliminaryName.get('proccess')?.value }}&nbsp;
            </span>
            <span *ngIf="preliminaryName.get('object')?.value">
              B. {{ preliminaryName.get('object')?.value }}&nbsp;
            </span>
            <span *ngIf="preliminaryName.get('departament')?.value">
              C. {{ preliminaryName.get('village')?.value }}
              {{ preliminaryName.get('municipality')?.value }},
              {{ preliminaryName.get('departament')?.value }}
            </span>
          </p>

          <div>
            <button mat-button matStepperNext>Siguiente</button>
          </div>

        </div>
      </form>
    </mat-step>

    <!-- <mat-step [stepControl]="responsibleEntity"> -->
    <mat-step>
      <ng-template matStepLabel>Entidad responsable</ng-template>

      <form [formGroup]="responsibleEntity" autocomplete="off">
        <div fxLayout="column" fxLayoutGap="15px">
          <br>

          <mat-form-field appearance="outline">
            <mat-label>Nombre de la entidad</mat-label>
            <input matInput [placeholder]="currentIdea.nameEntity" formControlName="nameEPI">
            <mat-hint>Puede ser comité, asociación,cocode, Intitución u otro tipo de organización.</mat-hint>
            <mat-error *ngIf="responsibleEntity.get('nameEPI')?.hasError('required')">
              El nombre de la entidad es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Nombre</mat-label>
            <input matInput [placeholder]="currentIdea.responsibleName" formControlName="leaderName">
            <mat-hint>Nombre del responsable del proyecto o representante legal.</mat-hint>
            <mat-error *ngIf="responsibleEntity.get('leaderName')?.hasError('required')">
              El nombre del responsable es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Correo electrónico</mat-label>
            <input type="email" matInput formControlName="email" [placeholder]="currentIdea.email">
            <mat-hint>Correo electrónico (institucional) o alterno.</mat-hint>
            <mat-error
              *ngIf="responsibleEntity.get('email')?.hasError('email') && !responsibleEntity.get('email')?.hasError('required')">
              Por favor, introduzca una dirección de correo electrónico válida
            </mat-error>
            <mat-error *ngIf="responsibleEntity.get('email')?.hasError('required')">
              El correo electrónico es <strong>requerido</strong>
            </mat-error>
            <mat-icon matSuffix>alternate_email</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Teléfono </mat-label>
            <span matPrefix>+502 &nbsp;</span>
            <input formControlName="phone" type="tel" matInput [placeholder]="currentIdea.phone">
            <mat-icon matSuffix>contact_phone</mat-icon>
            <mat-hint>Teléfono de contacto (Institucional)</mat-hint>
            <mat-error *ngIf="responsibleEntity.get('phone')?.hasError('required')">
              El teléfono de contacto es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>

          <div>
            <button mat-button matStepperPrevious>Volver</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>

        </div>
      </form>
    </mat-step>

    <!-- <mat-step [stepControl]="populationDelimitation"> -->
    <mat-step>
      <ng-template matStepLabel>Delimitación preliminar de los posibles beneficiarios </ng-template>

      <form [formGroup]="populationDelimitation" autocomplete="off">
        <div fxLayout="column" fxLayoutGap="15px">
          <br>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Población de referencia (Según INE)</mat-label>
            <input type="text" placeholder="Seleccione o ingrese un valor" matInput
              formControlName="referencePopulationId" [matAutocomplete]="auto">
            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
              <mat-option value="Nacional">
                Nacional
              </mat-option>
              <mat-option value="Departamental">
                Departamental
              </mat-option>
              <mat-option value="Municipal">
                Municipal
              </mat-option>
              <mat-option value="Comunal">
                Comunal
              </mat-option>
            </mat-autocomplete>
            <mat-hint>Nacional / Departamental / Municipal / Comunal / Otra</mat-hint>
            <mat-error *ngIf="populationDelimitation.get('typeProject')?.hasError('required')">
              La población de referencia es <strong>requerida</strong>
            </mat-error>
          </mat-form-field>

          <div fxLayout="row wrap" fxLayoutGap.gt-sm="10px">

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Total de población de referencia</mat-label>
              <input matInput formControlName="totalPopulation" type="number" placeholder="Ej. 125000">
              <mat-error *ngIf="populationDelimitation.get('totalPopulation')?.hasError('max')">
                Máximo 15 números.
              </mat-error>
            </mat-form-field>

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Género</mat-label>
              <mat-select formControlName="gender">
                <mat-option value="Hombres">
                  Hombres
                </mat-option>
                <mat-option value="Mujeres">
                  Mujeres
                </mat-option>
                <mat-option value="No aplica">
                  No aplica
                </mat-option>
              </mat-select>
            </mat-form-field>

          </div>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Denominación</mat-label>
            <input type="text" placeholder="Seleccione o ingrese un valor" matInput
              formControlName="denominationId" [matAutocomplete]="auto2">
            <mat-autocomplete autoActiveFirstOption #auto2="matAutocomplete">
              <mat-option value="Alumnos">
                Alumnos
              </mat-option>
              <mat-option value="Pacientes">
                Pacientes
              </mat-option>
              <mat-option value="Agricultores">
                Agricultores
              </mat-option>
            </mat-autocomplete>
            <mat-hint>Alumnos / Pacientes / Agricultores / Otra: Especifique</mat-hint>
            <mat-error *ngIf="populationDelimitation.get('denominationId')?.hasError('required')">
              La denominación es <strong>requerida</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Estimación preliminar beneficiarios</mat-label>
            <input matInput formControlName="estimateBeneficiaries" type="number" placeholder="Ej. 125000">
            <mat-hint>Representa la cantidad estimada de beneficiarios que tendrá el proyecto.</mat-hint>
            <mat-error *ngIf="populationDelimitation.get('estimateBeneficiaries')?.hasError('max')">
              Máximo 15 números.
            </mat-error>
          </mat-form-field>


          <mat-form-field fxFill appearance="outline">
            <mat-label>Caracterización preliminar</mat-label>
            <textarea matInput formControlName="preliminaryCharacterization" placeholder="Describir aspectos a nivel socioeconómicos del área de influencia del proyecto -Ejemplo: Pobreza, educación, salud, otros-"
              rows="4"></textarea>
            <mat-hint>Hasta {{500 - populationDelimitation.value.preliminaryCharacterization.length}} caracteres.</mat-hint>
            <mat-error *ngIf="populationDelimitation.get('preliminaryCharacterization')?.hasError('maxlength')">
              Máximo 500 caracteres.
            </mat-error>
            <mat-error *ngIf="populationDelimitation.get('preliminaryCharacterization')?.hasError('required')">
              El campo es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>

          <div>
            <button mat-button matStepperPrevious>Volver</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>

        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="geographicArea">
      <ng-template matStepLabel>Delimitación preliminar del área geográfica</ng-template>

      <form [formGroup]="geographicArea" autocomplete="off">
        <div fxLayout="column" fxLayoutGap="15px">
          <br>

          <mat-slide-toggle formControlName="oneAvailableTerrain">Se identifica solo un terreno disponible</mat-slide-toggle>
          <mat-slide-toggle formControlName="availableTerrain">Se identifican varios terrenos disponibles</mat-slide-toggle>
          <mat-slide-toggle formControlName="investPurchase">Es necesario invertir en la compra de un terreno</mat-slide-toggle>

          <mat-divider></mat-divider>

          <p class="mat-subheading-2">Situación legal del posible bien inmueble</p>
          <mat-slide-toggle formControlName="governmentTerrain">Terreno a nombre del Estado</mat-slide-toggle>
          <mat-slide-toggle formControlName="registerGovernmentTerrain">Se debe de inscribir el terreno a nombre del Estado</mat-slide-toggle>

          <mat-slide-toggle formControlName="switchStatus">Observación</mat-slide-toggle>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Observación</mat-label>
            <textarea matInput formControlName="statusDescribe" placeholder="Describir el estatus..."
            rows="4"></textarea>
            <mat-hint>Hasta {{200 - geographicArea.get('statusDescribe')?.value.length}} caracteres.</mat-hint>
            <mat-error *ngIf="geographicArea.get('statusDescribe')?.hasError('maxlength')">
              Máximo 200 caracteres.
            </mat-error>
          </mat-form-field>

          <div fxLayout="row wrap" fxLayoutGap.gt-sm="10px">

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Finca</mat-label>
              <input matInput placeholder="Finca..." formControlName="finca">
            </mat-form-field>

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Folio</mat-label>
              <input matInput placeholder="Folio..." formControlName="folio">
            </mat-form-field>

            <mat-form-field fxFlex appearance="outline">
              <mat-label>Libro</mat-label>
              <input matInput placeholder="Libro..." formControlName="libro">
            </mat-form-field>

          </div>

          <mat-divider></mat-divider>
          <p class="mat-subheading-2">Características del posible terreno</p>

          <div fxLayout="row wrap" fxLayoutGap.gt-sm="10px">
            <mat-slide-toggle fxFlex formControlName="plano">Plano</mat-slide-toggle>
            <mat-slide-toggle fxFlex formControlName="slightIncline">Inclinación leve</mat-slide-toggle>
            <mat-slide-toggle fxFlex formControlName="broken">Quebrado</mat-slide-toggle>
          </div>

          <mat-slide-toggle formControlName="withImage">Subir imagen del terreno</mat-slide-toggle>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Imagen</mat-label>
            <input matInput formControlName="image" placeholder="Ingrese una imagen clara para el contexto actual del terreno">
            <mat-icon matSuffix>file</mat-icon>
            <mat-hint>Archivo JPG, no mayor a 10MB.</mat-hint>
          </mat-form-field>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Descripción del terreno</mat-label>
            <textarea matInput formControlName="description" placeholder="Máximo 200 caracteres..."
            rows="4"></textarea>
            <mat-hint>Hasta {{200 - geographicArea.get('description')?.value.length}} caracteres.</mat-hint>
            <mat-error *ngIf="geographicArea.get('description')?.hasError('maxlength')">
              Máximo 200 caracteres.
            </mat-error>
          </mat-form-field>

          <mat-divider></mat-divider>
          <mat-slide-toggle formControlName="basicServices">Servicios básicos del posible terreno</mat-slide-toggle>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Descripción</mat-label>
            <textarea matInput formControlName="descriptionBasicServices" placeholder="Indique que servicios hay para el terreno (Ejemplo: Agua potable, luz eléctrica, drenajes sanitarios, otros."
            rows="4"></textarea>
            <mat-hint>Hasta {{200 - geographicArea.get('descriptionBasicServices')?.value.length}} caracteres.</mat-hint>
            <mat-error *ngIf="geographicArea.get('descriptionBasicServices')?.hasError('maxlength')">
              Máximo 200 caracteres.
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFill appearance="outline">
            <mat-label>Breve descripción de la posible ubicación</mat-label>
            <textarea matInput formControlName="descriptionLocation" placeholder="Describir ventajas y desventajas de cada uno de los terrenos, colindancias, posibles riesgos; cualquier aspecto que considere relevante."
            rows="4"></textarea>
            <mat-hint>Hasta {{200 - geographicArea.get('descriptionLocation')?.value.length}} caracteres.</mat-hint>
            <mat-error *ngIf="geographicArea.get('descriptionLocation')?.hasError('maxlength')">
              Máximo 200 caracteres.
            </mat-error>
          </mat-form-field>

          <div>
            <button mat-button matStepperPrevious>Volver</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>

        </div>
      </form>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Identificación preliminar de alternativas</ng-template>
      <div fxLayout="column" fxLayoutGap="15px">

      </div>
      <br>
      <mat-divider></mat-divider>
      <br>
      <div>
        <button mat-button color="primary">Finalizar</button>
        <span fxFlex></span>
        <button mat-button matStepperPrevious>Volver</button>
        <button mat-button (click)="stepper.reset()">Restablecer</button>
      </div>
    </mat-step>

  </mat-stepper>
</ngx-simplebar>
